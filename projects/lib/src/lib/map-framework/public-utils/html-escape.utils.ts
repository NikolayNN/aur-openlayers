
/**
 * Экранирует значение для безопасной вставки в HTML.
 *
 * Заменяет специальные символы (`& < > " '`) на HTML-сущности,
 * чтобы строка интерпретировалась как текст, а не как HTML.
 * Используется при работе с `innerHTML` и шаблонными строками
 * для предотвращения XSS.
 *
 * Если используется `textContent` или `createTextNode`,
 * экранирование не требуется.
 *
 * @param v Значение для экранирования (null/undefined → пустая строка)
 * @returns Безопасная HTML-строка
 */
export function escapeHtml(v: unknown): string {
  const s = String(v ?? '');
  return s.replace(/[&<>"']/g, (c) => ({
    '&': '&amp;',
    '<': '&lt;',
    '>': '&gt;',
    '"': '&quot;',
    "'": '&#39;',
  }[c]!));
}
